# 스코프(Scope)란?
> 변수의 접근할 수 있는 범위

ex)
```js
let greeting = 'Hello';
function greetSomeone() {
  let firstName = 'Josh';
  return greeting + ' ' + firstName;
}

greetSomeone(); // 'Hello Josh'
firstName; // ReferenceError: firstName is not defined
```

왜 `firstName`을 실행해보면 에러 메시지가 뜰까?<br/>
-> 변수 `firstName`은 `function greetSomeone()` 안에서만 사용할 수 있기 때문이다.

## Scope의 종류
### Global Scope (전역 스코프)
> 모든 곳에서 해당 변수에 접근할 수 있다

ex)
```js
let greeting = 'Hello';
function greetSomeone() {
  let firstName = 'Josh';
  return greeting + ' ' + firstName;
}

greetSomeone(); // 'Hello Josh'
firstName; // ReferenceError: firstName is not defined
```

이 예제에서 전역 스코프는
```js
let greeting = 'Hello';
```
와
```js
greetSomeone();
firstName;
```
이다.

특정 지역에 묶여있지 않고 바깥에 있는 코드는 전역 스코프라고 할수 있다.<br/>
전역 스코프에 선언된 변수는 어디서든지 그 값을 참조할 수 있다.

### Local Scope (지역 스코프)
> 해당 지역에서만 접근할 수 있기 때문에 범위를 벗어난 다른 지역에서는 접근할 수 없다

ex)
```js
let greeting = 'Hello';
function greetSomeone() {
  let firstName = 'Josh';
  return greeting + ' ' + firstName;
}

greetSomeone(); // 'Hello Josh'
firstName; // ReferenceError
```

이 예제에서 지역 스코프는
```js
function greetSomeone() {
  let firstName = 'Josh';
  return greeting + ' ' + firstName;
}
```
이다.<br/>
`function greetSomeone()`을 따로 선언함으로써 자신들만의 지역 스코프가 생성되었다.<br/>
지역 스코프 안쪽에서 선언된 변수는 바깥 지역에 영향을 주지 못한다.

## Scope의 특징
- Scope는 **변수 접근 규칙에 따른 유효 범위**를 말한다.
- 변수는 특정 환경 내에서만 사용 가능하며, 프로그래밍 언어는 각각의 변수 접근 규칙을 가지고 있다.
- Scope는 변수와 그 값이, 정확히 어디서부터 어디까지 유효한지를 판단하는 범위다.
- JavaScript 에서는 기본적으로, 함수가 선언되는(lexical) 동시에 자신만의 Scope(범위)를 가지게 된다.

## Local Scope vs Global Scope
- 안쪽 Scope에서 바깥 변수/함수를 접근하는 것은 가능하나 바깥쪽 Scope에서 안쪽 변수/함수를 접근하는 것은 불가능하다.
- Scope는 중첩이 가능하다(함수 안에 함수를 넣을 수 있다).
- 전역 스코프는 최상단의 Scope로 어디서든 접근이 가능하다.
- 지역 변수는 해당 함수 내에서 전역 변수보다 더 높은 우선순위를 가진다.

ex1)
```js
let name = "Richard"; // 전역 변수

function showName() {
  let name = "Jack"; // showName 함수 안에서만 접근 가능한 지역 변수
  console.log(name);
}

console.log(name); // 'Richard'
showName(); // 'Jack'
console.log(name); // 'Richard'
```

ex2)
```js
let name = "Richard";

function showName() {
  name = "Jack"; // 선언(let)이 없기 때문에, 바깥 scope에 있는 name이라는 변수를 가져온다.
  console.log(name);
}

console.log(name); // 'Richard'
showName(); // 'Jack'
console.log(name); // 'Jack'
```

## 5. Function Scope vs Block Scope
> Block이란 **중괄호로 시작하고, 끝나는 단위**를 뜻한다

ex)
```js
for(let i=0; i<5; i++) {
  console.log(i);
} // 0 1 2 3 4

console.log('final i:', i); // ReferenceError: i is not defined
```
여기서 block은 
```js
for(let i=0; i<5; i++) {
  console.log(i);
}
```
이다.<br/>
위 block에서 `console.log(i);`를 실행하면 다섯번 iteration이 되어 0 1 2 3 4 가 나온다.<br/>
하지만 `console.log('final i:', i);`를 실행하면 block범위를 벗어나게 되므로 변수를 사용할 수 없게 되어 ReferenceError가 나오는 것이다.<br/>
이처럼 block안의 변수는 block 범위를 벗어나는 즉시 사용할 수 없다.<br/>

그럼 같은 문제로 선언을 let 대신 var로 바꾸어 실행해보자.<br/>

ex2)
```js
for(var i=0; i<5; i++) {
  console.log(i);
} // 0 1 2 3 4
console.log('final i:', i); // 'final i:' 5
```
위 block에서 `console.log(i);`를 실행하면 역시 다섯번 iteration이 되어 0 1 2 3 4 가 나온다.<br/>
하지만 `console.log('final i:', i);`를 실행하면 let으로 선언해서 나온 결과와는 달리 5가 나온다. 왜 그럴까?<br/>
var는 let과는 다르게 block 범위를 벗어나도 같은 function scope 에서는 사용이 가능하다는 특이한 점이 있다.

#### let 키워드 vs const 키워드 vs var 키워드
<table>
  <tr>
    <td></td>
    <td><b>let</b></td>
    <td><b>const</b></td>
    <td><b>var</b></td>
  </tr>
  <tr>
    <td>유효 범위</td>
    <td>Block Scope</td>
    <td>Block Scope</td>
    <td>Function Scope</td>
  </tr>
  <tr>
    <td>값 재정의</td>
    <td>가능</td>
    <td>불가능</td>
    <td>가능</td>
  </tr>
  <tr>
    <td>재선언</td>
  <td>불가능</td>
  <td>불가능</td>
  <td>가능</td>
  </tr>
  </table>
  

## 전역 변수와 window 객체
### window의 정의
> 전역 범위를 대표하는 객체

### window의 특징
전역 변수에서 선언된 함수, 그리고 `var` 키워드를 이용해 선언된 변수는 `window` 객체와 연결한다.

ex)
```js
var myName = "Paul";
console.log(window.myName); // Paul

function foo() {
  console.log('bar');
}

console.log(foo === window.foo); // true
```

**전역 범위에 너무 많은 변수를 선언하지 않도록 주의하라!**

## 선언 없이 초기화된 전역 변수

**절대로, 선언 키워드(var, let, const) 없이 변수를 초기화하지 마라!**

```js
function showAge() {
  // age는 전역 변수로 취급된다
  age = 90;
  console.log(age);
}

showAge(); // 90
console.log(age); // 90
```
